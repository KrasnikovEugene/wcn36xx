From e645907bf949b8a3f3c42a7fbd39e997626e26f7 Mon Sep 17 00:00:00 2001
From: Eugene Krasnikov <k.eugene.e@gmail.com>
Date: Tue, 9 Apr 2013 18:02:32 +0200
Subject: [PATCH 1/3] Check if DEFINE_DYNAMIC_DEBUG_METADATA is defined

Signed-off-by: Eugene Krasnikov <k.eugene.e@gmail.com>
---
 wcn36xx.h |    3 +++
 1 file changed, 3 insertions(+)

diff --git a/wcn36xx.h b/wcn36xx.h
index f806867..5af30d6 100644
--- a/wcn36xx.h
+++ b/wcn36xx.h
@@ -40,6 +40,8 @@
 #define wcn36xx_dbg(fmt, arg...) \
 	pr_debug(DRIVER_PREFIX fmt "\n", ##arg)
 
+#ifdef DEFINE_DYNAMIC_DEBUG_METADATA
+#undef DEFINE_DYNAMIC_DEBUG_METADATA
 #define DEFINE_DYNAMIC_DEBUG_METADATA(name, fmt)		\
 	static struct _ddebug __used __aligned(8)		\
 	__attribute__((section("__verbose"))) name = {		\
@@ -50,6 +52,7 @@
 		.lineno = __LINE__,				\
 		.flags =  _DPRINTK_FLAGS_DEFAULT,		\
 	}
+#endif
 
 #define wcn36xx_dbg_dump(prefix_str, buf, len)			\
 do {									\
-- 
1.7.10

